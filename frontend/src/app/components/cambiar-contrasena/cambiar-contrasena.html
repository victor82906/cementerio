<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-10 col-lg-8">
            <div class="p-5 rounded-3 border border-secondary shadow-lg bg-dark-custom">
                <div class="d-flex justify-content-between align-items-center mb-4 border-bottom border-secondary pb-3">
                    <span class="btn btn-link text-white" routerLink="/home"><i class="bi bi-arrow-left me-2"></i>Volver
                        al Inicio</span>
                </div>

                <h2 class="text-white fw-bold mb-4 text-uppercase italic text-center">CAMBIAR CONTRASENA
                </h2>

                <form [formGroup]="contrasenas" (ngSubmit)="cambiar()">
                    <div class="row g-4 text-white">

                        <div class="mb-2">
                            <label for="contrasenaActual" class="form-label small fw-bold">CONTRASEÑA ACTUAL:</label>
                            <div class="input-group">
                                <input [type]="verContrasena ? 'text' : 'password'"
                                    class="form-control bg-transparent text-white border-secondary border-end-0"
                                    id="contrasenaActual" formControlName="contrasenaActual">
                                <button class="btn btn-outline-secondary border-secondary border-start-0" type="button"
                                    (click)="toggleContrasena()">
                                    <i class="bi" [ngClass]="verContrasena ? 'bi-eye-slash' : 'bi-eye'"></i>
                                </button>
                            </div>
                            @if(contrasenas.get("contrasenaActual")?.touched &&
                            (contrasenas.get("contrasenaActual")?.errors?.["required"] ||
                            contrasenas.get("contrasenaActual")?.errors?.["minlength"])){
                            <span class="text-danger d-block mt-1 fw-bold small">Formato incorrecto</span>
                            }
                        </div>

                        <div class="mb-2">
                            <label for="contrasena" class="form-label small fw-bold">NUEVA CONTRASEÑA:</label>
                            <div class="input-group">
                                <input [type]="verContrasena ? 'text' : 'password'"
                                    class="form-control bg-transparent text-white border-secondary border-end-0"
                                    id="contrasena" formControlName="contrasena">
                                <button class="btn btn-outline-secondary border-secondary border-start-0" type="button"
                                    (click)="toggleContrasena()">
                                    <i class="bi" [ngClass]="verContrasena ? 'bi-eye-slash' : 'bi-eye'"></i>
                                </button>
                            </div>
                            @if(contrasenas.get("contrasena")?.touched &&
                            (contrasenas.get("contrasena")?.errors?.["required"] ||
                            contrasenas.get("contrasena")?.errors?.["minlength"])){
                            <span class="text-danger d-block mt-1 fw-bold small">Minimo 8 caracteres</span>
                            }
                        </div>

                        <div class="mb-2">
                            <label for="repetirContrasena" class="form-label small fw-bold">REPITE CONTRASEÑA:</label>
                            <div class="input-group">
                                <input [type]="verContrasena ? 'text' : 'password'"
                                    class="form-control bg-transparent text-white border-secondary border-end-0"
                                    id="repetirContrasena" formControlName="repetirContrasena">
                                <button class="btn btn-outline-secondary border-secondary border-start-0" type="button"
                                    (click)="toggleContrasena()">
                                    <i class="bi" [ngClass]="verContrasena ? 'bi-eye-slash' : 'bi-eye'"></i>
                                </button>
                            </div>
                            @if(contrasenas.get("repetirContrasena")?.touched && contrasenas.errors?.["contrasena"]) {
                            <span
                                class="text-danger d-block mt-1 fw-bold small">{{contrasenas.errors?.["contrasena"]}}</span>
                            }
                        </div>

                        <div class="mt-5 text-center">
                            <button type="submit"
                                class="btn btn-primary-custom px-5 py-2 fw-bold text-uppercase shadow-sm">
                                CAMBIAR
                            </button>
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>

<app-modal-error #modalError></app-modal-error>